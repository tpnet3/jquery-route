jQuery.route={uri:function(a){var b=window.location.href,c=b.indexOf("#!");return a?(window.location.replace(b.slice(0,-1==c?b.length:c)+"#!"+a),a):-1!=c?(a=b.slice(c+2,b.length))?a:"/":"/"},path:function(){var a=this.uri(),b=a.indexOf("?"),c=a.indexOf("#"),d=a.length;-1!=b&&-1!=c?d=b<c?b:c:-1!=b&&-1==c?d=b:-1==b&&-1!=c&&(d=c);return a.slice(0,d).replace(/\/{2,}/g,"/")},query:function(){var a=this.uri(),b=a.indexOf("?"),c=a.indexOf("#"),d=/\+/g,e=/([^&=]+)=?([^&]*)/g,b=a.slice(b,c<a.length&&b<c?c:
a.length).substring(1);for(urlParams={};a=e.exec(b);)urlParams[decodeURIComponent(a[1].replace(d," "))]=decodeURIComponent(a[2].replace(d," "));return urlParams},hash:function(){var a=this.uri(),b=a.indexOf("?"),c=a.indexOf("#");return a.slice(c+1,b<a.length&&c<b?b:a.length)},callback:[],enchantUrl:function(){var a=window.location.href,a=a.replace(/#+!+\/*|$/,"#!/"),b=a.indexOf("#!/")+3,c=a.slice(0,b),a=a.slice(b),a=a.replace(/\/{2,}/g,"/");0<a.length&&"/"==a.slice(-1)&&(a=a.slice(0,-1));a=c+a;(c=
window.location.href==a)||window.location.replace(a);return c},enchantUrlHandler:function(){jQuery.route.enchantUrl()&&setTimeout(function(){jQuery.each(jQuery.route.callback,function(a,b){b()})},0)},loadedRoute:{}};$(document).ready(jQuery.route.enchantUrlHandler);$(window).on("hashchange",jQuery.route.enchantUrlHandler);
jQuery.fn.route=function(a,b){jQuery.route.callback.push(function(){var c=new RegExp("^"+a.replace(/\{\*}$/,"(.+)").replace(/\{([^\/]+)}/g,"([^\\/]+)")+"$"),d=jQuery.route.path();if(c.test(d))if("function"==typeof b){for(var e={},f=c.exec(a).slice(1),c=c.exec(d).slice(1),d=0;d<f.length;d++)e[f[d].replace(/^\{(.+)}$/,"$1")]=c[d];b({params:e,uri:jQuery.route.uri(),path:jQuery.route.path(),query:jQuery.route.query(),hash:jQuery.route.hash()})}else jQuery.route.loadedRoute[a]||$.getScript(b).done(function(b,
c){jQuery.route.loadedRoute[a]=!0;$(window).trigger("hashchange")}).fail(function(a,b,c){$(window).trigger("jqueryRouteLoadFail")})});return this};
